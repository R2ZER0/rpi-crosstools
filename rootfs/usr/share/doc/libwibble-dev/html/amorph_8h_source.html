<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>wibble: amorph.h Source File</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />



</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">wibble
   &#160;<span id="projectnumber">0.1.28</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">amorph.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="amorph_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 
<a name="l00006"></a>00006 <span class="preprocessor">#include &lt;iostream&gt;</span> <span class="comment">// for noise</span>
<a name="l00007"></a>00007 
<a name="l00008"></a>00008 <span class="preprocessor">#include &lt;<a class="code" href="mixin_8h.html">wibble/mixin.h</a>&gt;</span>
<a name="l00009"></a>00009 <span class="preprocessor">#include &lt;<a class="code" href="cast_8h.html">wibble/cast.h</a>&gt;</span>
<a name="l00010"></a>00010 <span class="preprocessor">#include &lt;<a class="code" href="maybe_8h.html">wibble/maybe.h</a>&gt;</span>
<a name="l00011"></a>00011 <span class="preprocessor">#include &lt;<a class="code" href="sfinae_8h.html">wibble/sfinae.h</a>&gt;</span>
<a name="l00012"></a>00012 <span class="preprocessor">#include &lt;<a class="code" href="test_8h.html">wibble/test.h</a>&gt;</span>
<a name="l00013"></a>00013 
<a name="l00014"></a>00014 <span class="preprocessor">#ifndef WIBBLE_AMORPH_H</span>
<a name="l00015"></a><a class="code" href="amorph_8h.html#a2b23b4a5a1866d1ce98fec651cadd0d5">00015</a> <span class="preprocessor"></span><span class="preprocessor">#define WIBBLE_AMORPH_H</span>
<a name="l00016"></a>00016 <span class="preprocessor"></span>
<a name="l00017"></a><a class="code" href="namespacewibble.html">00017</a> <span class="keyword">namespace </span>wibble {
<a name="l00018"></a>00018 
<a name="l00019"></a>00019 <span class="keyword">template</span>&lt; <span class="keyword">typename</span> _T &gt;
<a name="l00020"></a><a class="code" href="structwibble_1_1ReturnType.html">00020</a> <span class="keyword">struct </span><a class="code" href="structwibble_1_1ReturnType.html">ReturnType</a> {
<a name="l00021"></a><a class="code" href="structwibble_1_1ReturnType.html#a503b846220593c92e3cc7fad1e0004b7">00021</a>     <span class="keyword">typedef</span> _T <a class="code" href="structwibble_1_1ReturnType.html#a503b846220593c92e3cc7fad1e0004b7">T</a>;
<a name="l00022"></a>00022 };
<a name="l00023"></a>00023 
<a name="l00024"></a>00024 <span class="keyword">template</span>&lt;&gt;
<a name="l00025"></a><a class="code" href="structwibble_1_1ReturnType_3_01void_01_4.html">00025</a> <span class="keyword">struct </span><a class="code" href="structwibble_1_1ReturnType.html">ReturnType</a>&lt; void &gt; {
<a name="l00026"></a><a class="code" href="structwibble_1_1ReturnType_3_01void_01_4.html#a5798c1b0425d31eeeb1354a4ba51335b">00026</a>     <span class="keyword">typedef</span> <a class="code" href="structwibble_1_1Unit.html">Unit</a> <a class="code" href="structwibble_1_1ReturnType_3_01void_01_4.html#a5798c1b0425d31eeeb1354a4ba51335b">T</a>;
<a name="l00027"></a>00027 };
<a name="l00028"></a>00028 
<a name="l00029"></a>00029 <span class="keyword">template</span>&lt; <span class="keyword">typename</span> F, <span class="keyword">typename</span> R &gt;
<a name="l00030"></a><a class="code" href="structwibble_1_1SanitizeReturn.html">00030</a> <span class="keyword">struct </span><a class="code" href="structwibble_1_1SanitizeReturn.html">SanitizeReturn</a> {
<a name="l00031"></a><a class="code" href="structwibble_1_1SanitizeReturn.html#a9ff90c952e9c066d8ba501b103936081">00031</a>     <span class="keyword">inline</span> <span class="keyword">typename</span> <a class="code" href="structwibble_1_1ReturnType.html#a503b846220593c92e3cc7fad1e0004b7">ReturnType&lt; R &gt;::T</a> <a class="code" href="structwibble_1_1SanitizeReturn.html#a9ff90c952e9c066d8ba501b103936081">call</a>(
<a name="l00032"></a>00032         <span class="keyword">typename</span> F::argument_type a )
<a name="l00033"></a>00033     {
<a name="l00034"></a>00034         <span class="keywordflow">return</span> f( a );
<a name="l00035"></a>00035     };
<a name="l00036"></a>00036 };
<a name="l00037"></a>00037 
<a name="l00038"></a>00038 
<a name="l00039"></a>00039 <span class="keyword">template</span>&lt; <span class="keyword">typename</span> F &gt;
<a name="l00040"></a><a class="code" href="structwibble_1_1SanitizeReturn_3_01F_00_01void_01_4.html">00040</a> <span class="keyword">struct </span><a class="code" href="structwibble_1_1SanitizeReturn.html">SanitizeReturn</a>&lt; F, void &gt; {
<a name="l00041"></a><a class="code" href="structwibble_1_1SanitizeReturn_3_01F_00_01void_01_4.html#a5b383cc83923639ebd5f5b330099473e">00041</a>     <span class="keyword">inline</span> <a class="code" href="structwibble_1_1Unit.html">Unit</a> <a class="code" href="structwibble_1_1SanitizeReturn.html#a9ff90c952e9c066d8ba501b103936081">call</a>( <span class="keyword">typename</span> F::argument_type a )
<a name="l00042"></a>00042     {
<a name="l00043"></a>00043         f( a );
<a name="l00044"></a>00044         <span class="keywordflow">return</span> <a class="code" href="structwibble_1_1Unit.html">Unit</a>();
<a name="l00045"></a>00045     }
<a name="l00046"></a>00046 };
<a name="l00047"></a>00047 
<a name="l00048"></a>00048 <span class="keyword">template</span>&lt; <span class="keywordtype">int</span> A &gt;
<a name="l00049"></a><a class="code" href="structwibble_1_1IsZero.html">00049</a> <span class="keyword">struct </span><a class="code" href="structwibble_1_1IsZero.html">IsZero</a> {
<a name="l00050"></a><a class="code" href="structwibble_1_1IsZero.html#a1d399ac9235aa2f0ccfcbb443320b496">00050</a>     <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">bool</span> <a class="code" href="structwibble_1_1IsZero.html#a1d399ac9235aa2f0ccfcbb443320b496">value</a> = <span class="keyword">false</span>;
<a name="l00051"></a>00051 };
<a name="l00052"></a>00052 
<a name="l00053"></a>00053 <span class="keyword">template</span>&lt;&gt;
<a name="l00054"></a><a class="code" href="structwibble_1_1IsZero_3_010_01_4.html">00054</a> <span class="keyword">struct </span><a class="code" href="structwibble_1_1IsZero.html">IsZero</a>&lt; 0 &gt; {
<a name="l00055"></a><a class="code" href="structwibble_1_1IsZero_3_010_01_4.html#a89cc3dda618e06e15c82f1d5302bb2fd">00055</a>     <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">bool</span> <a class="code" href="structwibble_1_1IsZero.html#a1d399ac9235aa2f0ccfcbb443320b496">value</a> = <span class="keyword">true</span>;
<a name="l00056"></a>00056 };
<a name="l00057"></a>00057 
<a name="l00058"></a>00058 <span class="keyword">template</span>&lt; <span class="keyword">typename</span> T &gt;
<a name="l00059"></a><a class="code" href="structwibble_1_1IsPolymorphic.html">00059</a> <span class="keyword">struct </span><a class="code" href="structwibble_1_1IsPolymorphic.html">IsPolymorphic</a> {
<a name="l00060"></a><a class="code" href="structwibble_1_1IsPolymorphic_1_1A.html">00060</a>     <span class="keyword">struct </span><a class="code" href="structwibble_1_1IsPolymorphic_1_1A.html">A</a> : T {
<a name="l00061"></a>00061         <span class="keyword">virtual</span> <a class="code" href="structwibble_1_1IsPolymorphic_1_1A.html#ae3e557e759ebef807d4dd0b4a0d2c08b">~A</a>();
<a name="l00062"></a>00062     };
<a name="l00063"></a><a class="code" href="structwibble_1_1IsPolymorphic_1_1B.html">00063</a>     <span class="keyword">struct </span><a class="code" href="structwibble_1_1IsPolymorphic_1_1B.html">B</a> : T {};
<a name="l00064"></a><a class="code" href="structwibble_1_1IsPolymorphic.html#acaa0b1ba67fdc19be6d92b751e178bca">00064</a>     <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">bool</span> <a class="code" href="structwibble_1_1IsPolymorphic.html#acaa0b1ba67fdc19be6d92b751e178bca">value</a> = <a class="code" href="structwibble_1_1IsZero.html">IsZero</a>&lt; <span class="keyword">sizeof</span>( <a class="code" href="structwibble_1_1IsPolymorphic_1_1A.html">A</a> ) - <span class="keyword">sizeof</span>( <a class="code" href="structwibble_1_1IsPolymorphic_1_1B.html">B</a> ) &gt;<a class="code" href="structwibble_1_1IsPolymorphic.html#acaa0b1ba67fdc19be6d92b751e178bca">::value</a>;
<a name="l00065"></a>00065 };
<a name="l00066"></a>00066 
<a name="l00067"></a>00067 <span class="keyword">template</span>&lt; <span class="keyword">typename</span> F &gt;
<a name="l00068"></a><a class="code" href="structwibble_1_1SanitizeResultType.html">00068</a> <span class="keyword">struct </span><a class="code" href="structwibble_1_1SanitizeResultType.html">SanitizeResultType</a> {
<a name="l00069"></a><a class="code" href="structwibble_1_1SanitizeResultType.html#a72de2af2662e75494575cc05ecc45529">00069</a>     <a class="code" href="structwibble_1_1SanitizeResultType.html#a72de2af2662e75494575cc05ecc45529">SanitizeResultType</a>( F _f ) : <a class="code" href="structwibble_1_1SanitizeResultType.html#a9c25979a30a85d3a5d39904bf4b3886e">f</a>( _f ) {}
<a name="l00070"></a><a class="code" href="structwibble_1_1SanitizeResultType.html#ae01aa815dd026c39d47e4f524622ba59">00070</a>     <span class="keyword">typedef</span> <span class="keyword">typename</span> <a class="code" href="structwibble_1_1ReturnType.html#a503b846220593c92e3cc7fad1e0004b7">ReturnType&lt; typename F::result_type &gt;::T</a> <a class="code" href="structwibble_1_1SanitizeResultType.html#ae01aa815dd026c39d47e4f524622ba59">result_type</a>;
<a name="l00071"></a>00071 
<a name="l00072"></a><a class="code" href="structwibble_1_1SanitizeResultType.html#a42f1139c236a253d85c9ef5da050b805">00072</a>     <a class="code" href="structwibble_1_1SanitizeResultType.html#ae01aa815dd026c39d47e4f524622ba59">result_type</a> <a class="code" href="structwibble_1_1SanitizeResultType.html#a42f1139c236a253d85c9ef5da050b805">operator()</a>( <span class="keyword">typename</span> F::argument_type a ) {
<a name="l00073"></a>00073         <span class="keywordflow">return</span> <a class="code" href="structwibble_1_1SanitizeReturn.html">SanitizeReturn&lt; F, typename F::result_type &gt;</a>().call( a );
<a name="l00074"></a>00074     }
<a name="l00075"></a>00075 
<a name="l00076"></a>00076 
<a name="l00077"></a><a class="code" href="structwibble_1_1SanitizeResultType.html#a9c25979a30a85d3a5d39904bf4b3886e">00077</a>     F <a class="code" href="structwibble_1_1SanitizeResultType.html#a9c25979a30a85d3a5d39904bf4b3886e">f</a>;
<a name="l00078"></a>00078 };
<a name="l00079"></a>00079 
<a name="l00080"></a>00080 <span class="preprocessor">#ifndef SWIG_I</span>
<a name="l00081"></a><a class="code" href="structwibble_1_1Baseless.html">00081</a> <span class="preprocessor"></span><span class="keyword">struct </span><a class="code" href="structwibble_1_1Baseless.html">Baseless</a> {};
<a name="l00082"></a>00082 
<a name="l00083"></a><a class="code" href="structwibble_1_1VirtualBase.html">00083</a> <span class="keyword">struct </span><a class="code" href="structwibble_1_1VirtualBase.html">VirtualBase</a> {
<a name="l00084"></a><a class="code" href="structwibble_1_1VirtualBase.html#afa883d9d90fad2af1c49e06ccafcd35b">00084</a>     <span class="keyword">virtual</span> <a class="code" href="structwibble_1_1VirtualBase.html#afa883d9d90fad2af1c49e06ccafcd35b">~VirtualBase</a>() {}
<a name="l00085"></a>00085 };
<a name="l00086"></a>00086 
<a name="l00090"></a>00090 <span class="keyword">template</span>&lt; <span class="keyword">typename</span> Interface &gt;
<a name="l00091"></a><a class="code" href="structwibble_1_1MorphInterface.html">00091</a> <span class="keyword">struct </span><a class="code" href="structwibble_1_1MorphInterface.html" title="An interface implemented by all morph classes.">MorphInterface</a> : <span class="keyword">public</span> Interface {
<a name="l00092"></a><a class="code" href="structwibble_1_1MorphInterface.html#a057ebcf2c274e85c95ab18879fb4a3d8">00092</a>     <span class="keyword">virtual</span> <a class="code" href="structwibble_1_1VirtualBase.html">VirtualBase</a> *<a class="code" href="structwibble_1_1MorphInterface.html#a057ebcf2c274e85c95ab18879fb4a3d8">virtualBase</a>() { <span class="keywordflow">return</span> 0; }
<a name="l00093"></a>00093     <span class="keyword">virtual</span> <a class="code" href="structwibble_1_1MorphInterface.html" title="An interface implemented by all morph classes.">MorphInterface</a> *<a class="code" href="structwibble_1_1MorphInterface.html#abb701117ff5e608d1e24be52d939c0ae">constructCopy</a>( <span class="keywordtype">void</span> *where = 0, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> available = 0 ) <span class="keyword">const</span> = 0;
<a name="l00094"></a>00094     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="structwibble_1_1MorphInterface.html#afdd507a152538c631918f338983f40e6">destroy</a>( <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> available = 0 ) = 0;
<a name="l00095"></a><a class="code" href="structwibble_1_1MorphInterface.html#a47c347d424a2d08914191d323783b4d4">00095</a>     <span class="keyword">virtual</span> <a class="code" href="structwibble_1_1MorphInterface.html#a47c347d424a2d08914191d323783b4d4">~MorphInterface</a>() {}
<a name="l00096"></a>00096     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="structwibble_1_1MorphInterface.html#aaeb47c0526882f1f4438b40a9178496c">leq</a>( <span class="keyword">const</span> <a class="code" href="structwibble_1_1MorphInterface.html" title="An interface implemented by all morph classes.">MorphInterface</a> * ) <span class="keyword">const</span> = 0;
<a name="l00097"></a>00097 };
<a name="l00098"></a>00098 
<a name="l00100"></a><a class="code" href="structwibble_1_1MorphAllocator.html">00100</a> <span class="keyword">struct </span><a class="code" href="structwibble_1_1MorphAllocator.html" title="custom allocator for morph classes">MorphAllocator</a> {
<a name="l00101"></a><a class="code" href="structwibble_1_1MorphAllocator.html#a562b08101eb7db4207e6d6476354972e">00101</a>     <span class="keywordtype">void</span> *<a class="code" href="structwibble_1_1MorphAllocator.html#a562b08101eb7db4207e6d6476354972e">operator new</a>( <span class="keywordtype">size_t</span> bytes, <span class="keywordtype">void</span> *where, <span class="keywordtype">unsigned</span> available ) {
<a name="l00102"></a>00102         <span class="keywordflow">if</span> ( bytes &gt; available || where == 0 ) {
<a name="l00103"></a>00103             where = ::operator <span class="keyword">new</span>( bytes );
<a name="l00104"></a>00104             <span class="keywordflow">return</span> where;
<a name="l00105"></a>00105         }
<a name="l00106"></a>00106         <span class="keywordflow">return</span> where;
<a name="l00107"></a>00107     }
<a name="l00108"></a><a class="code" href="structwibble_1_1MorphAllocator.html#af4124088e51e93728996245552c2b14c">00108</a>     <span class="keywordtype">void</span> *<a class="code" href="structwibble_1_1MorphAllocator.html#af4124088e51e93728996245552c2b14c">operator new</a>( <span class="keywordtype">size_t</span> bytes ) {
<a name="l00109"></a>00109         <a class="code" href="structwibble_1_1MorphAllocator.html#a562b08101eb7db4207e6d6476354972e">return ::operator new</a>( bytes );
<a name="l00110"></a>00110     }
<a name="l00111"></a>00111 };
<a name="l00112"></a>00112 
<a name="l00113"></a>00113 <span class="keyword">template</span>&lt; <span class="keyword">typename</span> W, <span class="keyword">typename</span> Interface &gt;
<a name="l00114"></a><a class="code" href="structwibble_1_1MorphBase.html">00114</a> <span class="keyword">struct </span><a class="code" href="structwibble_1_1MorphBase.html">MorphBase</a> : <a class="code" href="structwibble_1_1MorphInterface.html" title="An interface implemented by all morph classes.">MorphInterface</a>&lt; Interface &gt; {
<a name="l00115"></a><a class="code" href="structwibble_1_1MorphBase.html#a95d6f4ae4b646174758c39330ef6cd0b">00115</a>     <a class="code" href="structwibble_1_1MorphBase.html#a95d6f4ae4b646174758c39330ef6cd0b">MorphBase</a>( <span class="keyword">const</span> W &amp;w ) : <a class="code" href="structwibble_1_1MorphBase.html#a326c9dde2ec2f6fe3cb755e321205958">m_wrapped</a>( w ) {}
<a name="l00116"></a>00116 
<a name="l00117"></a>00117     <span class="keyword">template</span>&lt; <span class="keyword">typename</span> _W &gt;
<a name="l00118"></a><a class="code" href="structwibble_1_1MorphBase.html#a9b012231ecb7838ec27cef13a2c6b487">00118</a>     <span class="keyword">typename</span> <a class="code" href="structwibble_1_1EnableIf.html">EnableIf&lt; IsPolymorphic&lt; _W &gt;</a>, <a class="code" href="structwibble_1_1VirtualBase.html">VirtualBase</a> *&gt;::T <a class="code" href="structwibble_1_1MorphBase.html#a9b012231ecb7838ec27cef13a2c6b487">virtualBase</a>() {
<a name="l00119"></a>00119         <span class="keywordflow">return</span> <span class="keyword">dynamic_cast&lt;</span> <a class="code" href="structwibble_1_1VirtualBase.html">VirtualBase</a> * <span class="keyword">&gt;</span>( &amp;<a class="code" href="structwibble_1_1MorphBase.html#a326c9dde2ec2f6fe3cb755e321205958">m_wrapped</a> );
<a name="l00120"></a>00120     }
<a name="l00121"></a>00121 
<a name="l00122"></a>00122     <span class="keyword">template</span>&lt; <span class="keyword">typename</span> _W &gt;
<a name="l00123"></a>00123     <span class="keyword">typename</span> <a class="code" href="structwibble_1_1EnableIf.html">EnableIf&lt; TNot&lt; IsPolymorphic&lt; _W &gt;</a> &gt;, <a class="code" href="structwibble_1_1VirtualBase.html">VirtualBase</a> *&gt;::T
<a name="l00124"></a><a class="code" href="structwibble_1_1MorphBase.html#a6fb8cc1b90e84c71b158ce64c84d5a6b">00124</a>     <a class="code" href="structwibble_1_1MorphBase.html#a6fb8cc1b90e84c71b158ce64c84d5a6b">virtualBase</a>() {
<a name="l00125"></a>00125         <span class="keywordflow">return</span> 0;
<a name="l00126"></a>00126     }
<a name="l00127"></a>00127 
<a name="l00128"></a><a class="code" href="structwibble_1_1MorphBase.html#a0efec79be12bb678103b857e0afff4e8">00128</a>     <span class="keyword">virtual</span> <a class="code" href="structwibble_1_1VirtualBase.html">VirtualBase</a> *<a class="code" href="structwibble_1_1MorphBase.html#a0efec79be12bb678103b857e0afff4e8">virtualBase</a>() {
<a name="l00129"></a>00129         <span class="keywordflow">return</span> virtualBase&lt; W &gt;();
<a name="l00130"></a>00130     }
<a name="l00131"></a>00131 
<a name="l00132"></a><a class="code" href="structwibble_1_1MorphBase.html#aa189feb1e6ccc3be6b99c85a0b65169d">00132</a>     W &amp;<a class="code" href="structwibble_1_1MorphBase.html#aa189feb1e6ccc3be6b99c85a0b65169d">wrapped</a>() {
<a name="l00133"></a>00133         <span class="keywordflow">return</span> <a class="code" href="structwibble_1_1MorphBase.html#a326c9dde2ec2f6fe3cb755e321205958">m_wrapped</a>;
<a name="l00134"></a>00134     }
<a name="l00135"></a>00135 
<a name="l00136"></a>00136 <span class="keyword">protected</span>:
<a name="l00137"></a><a class="code" href="structwibble_1_1MorphBase.html#a326c9dde2ec2f6fe3cb755e321205958">00137</a>     W <a class="code" href="structwibble_1_1MorphBase.html#a326c9dde2ec2f6fe3cb755e321205958">m_wrapped</a>;
<a name="l00138"></a>00138 };
<a name="l00139"></a>00139 
<a name="l00140"></a>00140 <span class="keyword">template</span>&lt; <span class="keyword">typename</span> Self, <span class="keyword">typename</span> W, <span class="keyword">typename</span> Interface &gt;
<a name="l00141"></a><a class="code" href="structwibble_1_1Morph.html">00141</a> <span class="keyword">struct </span><a class="code" href="structwibble_1_1Morph.html">Morph</a> : <a class="code" href="structwibble_1_1MorphBase.html">MorphBase</a>&lt; W, Interface &gt;,
<a name="l00142"></a>00142     mixin::Comparable&lt; Morph&lt; Self, W, Interface &gt; &gt;,
<a name="l00143"></a>00143     <a class="code" href="structwibble_1_1MorphAllocator.html" title="custom allocator for morph classes">MorphAllocator</a>
<a name="l00144"></a>00144 {
<a name="l00145"></a><a class="code" href="structwibble_1_1Morph.html#a1df6531e07ab74b740ca2b09ad920dc2">00145</a>     <span class="keyword">typedef</span> W <a class="code" href="structwibble_1_1Morph.html#a1df6531e07ab74b740ca2b09ad920dc2">Wrapped</a>;
<a name="l00146"></a>00146 
<a name="l00147"></a><a class="code" href="structwibble_1_1Morph.html#a91ee27b2c0813b32c8cb7854c7947b68">00147</a>     <a class="code" href="structwibble_1_1Morph.html#a91ee27b2c0813b32c8cb7854c7947b68">Morph</a>( <span class="keyword">const</span> <a class="code" href="structwibble_1_1Morph.html#a1df6531e07ab74b740ca2b09ad920dc2">Wrapped</a> &amp;w ) : <a class="code" href="structwibble_1_1MorphBase.html">MorphBase</a>&lt; W, Interface &gt;( w ) {}
<a name="l00148"></a>00148 
<a name="l00149"></a><a class="code" href="structwibble_1_1Morph.html#abaae10568268ab103a90c74cf725fec8">00149</a>     <span class="keyword">const</span> Self &amp;<span class="keyword">self</span>() <span class="keyword">const</span> { <span class="keywordflow">return</span> *<span class="keyword">static_cast&lt;</span> <span class="keyword">const </span>Self * <span class="keyword">&gt;</span>( this ); }
<a name="l00150"></a>00150 
<a name="l00151"></a><a class="code" href="structwibble_1_1Morph.html#af7e9730a44fda9d81e3bcc1b67bc6c55">00151</a>     <span class="keywordtype">bool</span> <a class="code" href="structwibble_1_1Morph.html#af7e9730a44fda9d81e3bcc1b67bc6c55">operator&lt;=</a>( <span class="keyword">const</span> <a class="code" href="structwibble_1_1Morph.html">Morph</a> &amp;o )<span class="keyword"> const </span>{
<a name="l00152"></a>00152         <span class="keywordflow">return</span> <a class="code" href="structwibble_1_1Morph.html#acdff03a885b5df775739b51649912e31">wrapped</a>().operator&lt;=( o.<a class="code" href="structwibble_1_1Morph.html#acdff03a885b5df775739b51649912e31">wrapped</a>() );
<a name="l00153"></a>00153     }
<a name="l00154"></a>00154 
<a name="l00155"></a>00155     <span class="comment">// evaluation of correctness of definition should be done</span>
<a name="l00156"></a><a class="code" href="structwibble_1_1Morph.html#a38f16d143df3068d31101a73c0cbd003">00156</a>     <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="structwibble_1_1Morph.html#a38f16d143df3068d31101a73c0cbd003">leq</a>( <span class="keyword">const</span> <a class="code" href="structwibble_1_1MorphInterface.html" title="An interface implemented by all morph classes.">MorphInterface&lt; Interface &gt;</a> *_o )<span class="keyword"> const </span>{
<a name="l00157"></a>00157         <span class="keyword">const</span> <a class="code" href="structwibble_1_1Morph.html">Morph</a> *o = <span class="keyword">dynamic_cast&lt;</span> <span class="keyword">const </span><a class="code" href="structwibble_1_1Morph.html">Morph</a> * <span class="keyword">&gt;</span>( _o );
<a name="l00158"></a>00158         <span class="keywordflow">if</span> ( !o ) {
<a name="l00159"></a>00159             <span class="keywordflow">if</span> ( <span class="keyword">typeid</span>( <a class="code" href="structwibble_1_1Morph.html">Morph</a> ).before( <span class="keyword">typeid</span>( _o ) ) )
<a name="l00160"></a>00160                 <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00161"></a>00161             <span class="keywordflow">else</span>
<a name="l00162"></a>00162                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00163"></a>00163         }
<a name="l00164"></a>00164         <span class="keywordflow">return</span> <a class="code" href="structwibble_1_1Morph.html#acdff03a885b5df775739b51649912e31">wrapped</a>() &lt;= o-&gt;<a class="code" href="structwibble_1_1Morph.html#acdff03a885b5df775739b51649912e31">wrapped</a>();
<a name="l00165"></a>00165     }
<a name="l00166"></a>00166 
<a name="l00167"></a><a class="code" href="structwibble_1_1Morph.html#a898df51899e7d27cffc32e9ddad0b8f5">00167</a>     <span class="keyword">virtual</span> <a class="code" href="structwibble_1_1MorphInterface.html" title="An interface implemented by all morph classes.">MorphInterface&lt; Interface &gt;</a> *<a class="code" href="structwibble_1_1Morph.html#a898df51899e7d27cffc32e9ddad0b8f5">constructCopy</a>(
<a name="l00168"></a>00168         <span class="keywordtype">void</span> *where, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> available )<span class="keyword"> const</span>
<a name="l00169"></a>00169 <span class="keyword">    </span>{
<a name="l00170"></a>00170         <span class="keywordflow">return</span> <span class="keyword">new</span>( where, available ) Self( <span class="keyword">self</span>() );
<a name="l00171"></a>00171     }
<a name="l00172"></a>00172 
<a name="l00173"></a><a class="code" href="structwibble_1_1Morph.html#acf6871cf01fd7dd9c4a2e16269b705e9">00173</a>     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="structwibble_1_1Morph.html#acf6871cf01fd7dd9c4a2e16269b705e9">destroy</a>( <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> available ) {
<a name="l00174"></a>00174         <span class="keywordflow">if</span> ( <span class="keyword">sizeof</span>( <a class="code" href="structwibble_1_1Morph.html">Morph</a> ) &lt;= available ) {
<a name="l00175"></a>00175             this-&gt;<a class="code" href="structwibble_1_1Morph.html#a912efbef46780a83d49f63a0db107f1f">~Morph</a>();
<a name="l00176"></a>00176         } <span class="keywordflow">else</span> {
<a name="l00177"></a>00177             <span class="keyword">delete</span> <span class="keyword">this</span>;
<a name="l00178"></a>00178         }
<a name="l00179"></a>00179     }
<a name="l00180"></a>00180 
<a name="l00181"></a><a class="code" href="structwibble_1_1Morph.html#acdff03a885b5df775739b51649912e31">00181</a>     <span class="keyword">const</span> <a class="code" href="structwibble_1_1Morph.html#a1df6531e07ab74b740ca2b09ad920dc2">Wrapped</a> &amp;<a class="code" href="structwibble_1_1Morph.html#acdff03a885b5df775739b51649912e31">wrapped</a>()<span class="keyword"> const </span>{
<a name="l00182"></a>00182         <span class="keywordflow">return</span> this-&gt;<a class="code" href="structwibble_1_1MorphBase.html#a326c9dde2ec2f6fe3cb755e321205958">m_wrapped</a>;
<a name="l00183"></a>00183     }
<a name="l00184"></a>00184 
<a name="l00185"></a><a class="code" href="structwibble_1_1Morph.html#a7b7b56c8ffcc3104f47cf67c13880160">00185</a>     <a class="code" href="structwibble_1_1Morph.html#a1df6531e07ab74b740ca2b09ad920dc2">Wrapped</a> &amp;<a class="code" href="structwibble_1_1Morph.html#a7b7b56c8ffcc3104f47cf67c13880160">wrapped</a>() {
<a name="l00186"></a>00186         <span class="keywordflow">return</span> this-&gt;<a class="code" href="structwibble_1_1MorphBase.html#a326c9dde2ec2f6fe3cb755e321205958">m_wrapped</a>;
<a name="l00187"></a>00187     }
<a name="l00188"></a>00188 
<a name="l00189"></a><a class="code" href="structwibble_1_1Morph.html#a912efbef46780a83d49f63a0db107f1f">00189</a>     <span class="keyword">virtual</span> <a class="code" href="structwibble_1_1Morph.html#a912efbef46780a83d49f63a0db107f1f">~Morph</a>() {}
<a name="l00190"></a>00190 };
<a name="l00191"></a>00191 <span class="preprocessor">#endif</span>
<a name="l00192"></a>00192 <span class="preprocessor"></span>
<a name="l00260"></a>00260 <span class="preprocessor">#ifndef WIBBLE_AMORPH_PADDING</span>
<a name="l00261"></a><a class="code" href="amorph_8h.html#a84ecd38be2fec6c72bee552af9b7e598">00261</a> <span class="preprocessor"></span><span class="preprocessor">#define WIBBLE_AMORPH_PADDING 0</span>
<a name="l00262"></a>00262 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00263"></a><a class="code" href="classwibble_1_1AmorphPadder.html">00263</a> <span class="preprocessor"></span><span class="keyword">template</span>&lt;<span class="keywordtype">int</span> Padding1&gt; <span class="keyword">class </span><a class="code" href="classwibble_1_1AmorphPadder.html">AmorphPadder</a>
<a name="l00264"></a>00264 {
<a name="l00265"></a>00265     <span class="keywordtype">int</span> m_padding[ Padding1 ];
<a name="l00266"></a>00266 };
<a name="l00267"></a><a class="code" href="classwibble_1_1AmorphPadder_3_010_01_4.html">00267</a> <span class="keyword">template</span>&lt;&gt; <span class="keyword">class </span><a class="code" href="classwibble_1_1AmorphPadder.html">AmorphPadder</a>&lt;0&gt;
<a name="l00268"></a>00268 {
<a name="l00269"></a>00269 };
<a name="l00270"></a>00270 
<a name="l00271"></a>00271 <span class="keyword">template</span>&lt; <span class="keyword">typename</span> Self, <span class="keyword">typename</span> _Interface, <span class="keywordtype">int</span> Padding = WIBBLE_AMORPH_PADDING &gt;
<a name="l00272"></a><a class="code" href="structwibble_1_1Amorph.html">00272</a> <span class="keyword">struct </span><a class="code" href="structwibble_1_1Amorph.html">Amorph</a> {
<a name="l00273"></a><a class="code" href="structwibble_1_1Amorph.html#acf447c56c499bde37bed3e07a72d80a1">00273</a>     <span class="keyword">typedef</span> _Interface <a class="code" href="structwibble_1_1Amorph.html#acf447c56c499bde37bed3e07a72d80a1">Interface</a>;
<a name="l00274"></a>00274     <span class="comment">// typedef MorphInterface&lt; Interface &gt; Morp;</span>
<a name="l00275"></a>00275 
<a name="l00276"></a><a class="code" href="structwibble_1_1Amorph_1_1Convert.html">00276</a>     <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt; <span class="keyword">struct </span><a class="code" href="structwibble_1_1Amorph_1_1Convert.html">Convert</a> {
<a name="l00277"></a><a class="code" href="structwibble_1_1Amorph_1_1Convert.html#ac1d8b7c263abe6055ce33a359702e006">00277</a>         <span class="keyword">typedef</span> T <a class="code" href="structwibble_1_1Amorph_1_1Convert.html#ac1d8b7c263abe6055ce33a359702e006">type</a>;
<a name="l00278"></a>00278     };
<a name="l00279"></a>00279 
<a name="l00280"></a>00280     <span class="comment">/* Amorph( const Interface &amp;b ) {</span>
<a name="l00281"></a>00281 <span class="comment">        setInterfacePointer( &amp;b );</span>
<a name="l00282"></a>00282 <span class="comment">        } */</span>
<a name="l00283"></a>00283 
<a name="l00284"></a><a class="code" href="structwibble_1_1Amorph.html#ad9d2ba0a31704a23c858162191cfa70e">00284</a>     <a class="code" href="structwibble_1_1Amorph.html#ad9d2ba0a31704a23c858162191cfa70e">Amorph</a>( <span class="keyword">const</span> <a class="code" href="structwibble_1_1MorphInterface.html" title="An interface implemented by all morph classes.">MorphInterface&lt; Interface &gt;</a> &amp;b ) {
<a name="l00285"></a>00285         <a class="code" href="structwibble_1_1Amorph.html#ad56b9c407d0dae8e718c054fdaa4bcf3">setMorphInterfacePointer</a>( &amp;b );
<a name="l00286"></a>00286     }
<a name="l00287"></a>00287 
<a name="l00288"></a><a class="code" href="structwibble_1_1Amorph.html#a049cfc45c44c5d3180fffcf832165887">00288</a>     <a class="code" href="structwibble_1_1Amorph.html#a049cfc45c44c5d3180fffcf832165887">Amorph</a>( <span class="keyword">const</span> <a class="code" href="structwibble_1_1Amorph.html">Amorph</a> &amp;a ) {
<a name="l00289"></a>00289         <a class="code" href="structwibble_1_1Amorph.html#ad56b9c407d0dae8e718c054fdaa4bcf3">setMorphInterfacePointer</a>( a.<a class="code" href="structwibble_1_1Amorph.html#ae68430db3e0967615338630292f2ad2c">morphInterface</a>() );
<a name="l00290"></a>00290         <span class="comment">// setInterfacePointer( a.implementation() );</span>
<a name="l00291"></a>00291     }
<a name="l00292"></a>00292 
<a name="l00293"></a><a class="code" href="structwibble_1_1Amorph.html#a7accd0ed76ad5c681a237441c5abc741">00293</a>     <a class="code" href="structwibble_1_1Amorph.html#a7accd0ed76ad5c681a237441c5abc741">Amorph</a>() : m_impl( 0 ) {}
<a name="l00294"></a>00294 
<a name="l00295"></a><a class="code" href="structwibble_1_1Amorph.html#addf598458a6b4a28559b1601dee3dc2b">00295</a>     <span class="keyword">const</span> Self &amp;<span class="keyword">self</span>() <span class="keyword">const</span> {
<a name="l00296"></a>00296         <span class="keywordflow">return</span> *<span class="keyword">static_cast&lt;</span> <span class="keyword">const </span>Self * <span class="keyword">&gt;</span>( this );
<a name="l00297"></a>00297     }
<a name="l00298"></a>00298 
<a name="l00299"></a><a class="code" href="structwibble_1_1Amorph.html#a347f685ff30aed4644f60f64aec7175e">00299</a>     Self &amp;<span class="keyword">self</span>() {
<a name="l00300"></a>00300         <span class="keywordflow">return</span> *<span class="keyword">static_cast&lt;</span>Self *<span class="keyword">&gt;</span>( this );
<a name="l00301"></a>00301     }
<a name="l00302"></a>00302 
<a name="l00303"></a><a class="code" href="structwibble_1_1Amorph.html#aad3f66604804e54dbed118bcf9384750">00303</a>     <span class="keywordtype">bool</span> <a class="code" href="structwibble_1_1Amorph.html#aad3f66604804e54dbed118bcf9384750">leq</a>( <span class="keyword">const</span> Self &amp;i )<span class="keyword"> const </span>{
<a name="l00304"></a>00304         <span class="keywordflow">if</span> ( <a class="code" href="structwibble_1_1Amorph.html#ae68430db3e0967615338630292f2ad2c">morphInterface</a>() )
<a name="l00305"></a>00305             <span class="keywordflow">if</span> ( i.morphInterface() )
<a name="l00306"></a>00306                 <span class="keywordflow">return</span> <a class="code" href="structwibble_1_1Amorph.html#ae68430db3e0967615338630292f2ad2c">morphInterface</a>()-&gt;leq( i.morphInterface() );
<a name="l00307"></a>00307             <span class="keywordflow">else</span>
<a name="l00308"></a>00308                 <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="comment">// it&#39;s false that non-0 &lt;= 0</span>
<a name="l00309"></a>00309         <span class="keywordflow">else</span>
<a name="l00310"></a>00310             <span class="keywordflow">return</span> !i.morphInterface(); <span class="comment">// 0 &lt;= 0 holds, but 0 &lt;=</span>
<a name="l00311"></a>00311                                         <span class="comment">// non-0 doesn&#39;t</span>
<a name="l00312"></a>00312     }
<a name="l00313"></a>00313 
<a name="l00314"></a><a class="code" href="structwibble_1_1Amorph.html#a6d6c45cc991a7536579eb53030ff27da">00314</a>     <span class="keywordtype">bool</span> <a class="code" href="structwibble_1_1Amorph.html#a6d6c45cc991a7536579eb53030ff27da">operator&lt;=</a>( <span class="keyword">const</span> Self &amp;i )<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="structwibble_1_1Amorph.html#aad3f66604804e54dbed118bcf9384750">leq</a>( i ); }
<a name="l00315"></a>00315 
<a name="l00316"></a><a class="code" href="structwibble_1_1Amorph.html#a9fea57477b1f56d4d537dd0f5a10eec4">00316</a>     <span class="keywordtype">void</span> <a class="code" href="structwibble_1_1Amorph.html#a9fea57477b1f56d4d537dd0f5a10eec4">setInterfacePointer</a>( <span class="keyword">const</span> <a class="code" href="structwibble_1_1RangeInterface.html">Interface</a> *i ) {
<a name="l00317"></a>00317         <span class="keywordflow">if</span> ( !i ) {
<a name="l00318"></a>00318             m_impl = 0;
<a name="l00319"></a>00319             <span class="keywordflow">return</span>;
<a name="l00320"></a>00320         }
<a name="l00321"></a>00321 
<a name="l00322"></a>00322         <span class="comment">/* assert( dynamic_cast&lt; const MorphInterface * &gt;( i ) );</span>
<a name="l00323"></a>00323 <span class="comment">        assert( dynamic_cast&lt; const Interface * &gt;(</span>
<a name="l00324"></a>00324 <span class="comment">        dynamic_cast&lt; const MorphInterface * &gt;( i ) ) ); */</span>
<a name="l00325"></a>00325 
<a name="l00326"></a>00326         m_impl = <span class="keyword">dynamic_cast&lt;</span> <span class="keyword">const </span><a class="code" href="structwibble_1_1MorphInterface.html" title="An interface implemented by all morph classes.">MorphInterface&lt; Interface &gt;</a> * <span class="keyword">&gt;</span>( i )-&gt;constructCopy(
<a name="l00327"></a>00327             &amp;m_padding, <span class="keyword">sizeof</span>( m_padding ) );
<a name="l00328"></a>00328 
<a name="l00329"></a>00329         <span class="comment">// assert( dynamic_cast&lt; const Interface * &gt;( m_impl ) );</span>
<a name="l00330"></a>00330     }
<a name="l00331"></a>00331 
<a name="l00332"></a><a class="code" href="structwibble_1_1Amorph.html#ad56b9c407d0dae8e718c054fdaa4bcf3">00332</a>     <span class="keywordtype">void</span> <a class="code" href="structwibble_1_1Amorph.html#ad56b9c407d0dae8e718c054fdaa4bcf3">setMorphInterfacePointer</a>( <span class="keyword">const</span> <a class="code" href="structwibble_1_1MorphInterface.html" title="An interface implemented by all morph classes.">MorphInterface&lt; Interface &gt;</a> *i ) {
<a name="l00333"></a>00333         <span class="keywordflow">if</span> ( !i ) {
<a name="l00334"></a>00334             m_impl = 0;
<a name="l00335"></a>00335             <span class="keywordflow">return</span>;
<a name="l00336"></a>00336         }
<a name="l00337"></a>00337         m_impl = i-&gt;<a class="code" href="structwibble_1_1MorphInterface.html#abb701117ff5e608d1e24be52d939c0ae">constructCopy</a>( &amp;m_padding, <span class="keyword">sizeof</span>( m_padding ) );
<a name="l00338"></a>00338     }
<a name="l00339"></a>00339 
<a name="l00340"></a><a class="code" href="structwibble_1_1Amorph.html#a33bc5291aa8fe734c67636a2c817a4e1">00340</a>     <a class="code" href="structwibble_1_1Amorph.html">Amorph</a> &amp;<a class="code" href="structwibble_1_1Amorph.html#a33bc5291aa8fe734c67636a2c817a4e1">operator=</a>( <span class="keyword">const</span> <a class="code" href="structwibble_1_1Amorph.html">Amorph</a> &amp;i ) {
<a name="l00341"></a>00341         <a class="code" href="structwibble_1_1Amorph.html#a9fea57477b1f56d4d537dd0f5a10eec4">setInterfacePointer</a>( i.<a class="code" href="structwibble_1_1Amorph.html#ad0cecac2b67da54eab50fe71a226b78c">implementation</a>() );
<a name="l00342"></a>00342         <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00343"></a>00343     }
<a name="l00344"></a>00344 
<a name="l00345"></a><a class="code" href="structwibble_1_1Amorph.html#a5310acf932dc40c7aac414891c511fc2">00345</a>     <a class="code" href="structwibble_1_1Amorph.html#a5310acf932dc40c7aac414891c511fc2">~Amorph</a>() {
<a name="l00346"></a>00346         <span class="keywordflow">if</span> ( <a class="code" href="structwibble_1_1Amorph.html#ae68430db3e0967615338630292f2ad2c">morphInterface</a>() )
<a name="l00347"></a>00347             <a class="code" href="structwibble_1_1Amorph.html#ae68430db3e0967615338630292f2ad2c">morphInterface</a>()-&gt;destroy( <span class="keyword">sizeof</span>( m_padding ) );
<a name="l00348"></a>00348     }
<a name="l00349"></a>00349 
<a name="l00350"></a>00350     <span class="keyword">template</span>&lt; <span class="keyword">typename</span> F &gt;
<a name="l00351"></a><a class="code" href="structwibble_1_1Amorph.html#a2992cc74a4b94a3dee10eeff796033b0">00351</a>     <a class="code" href="structwibble_1_1Maybe.html">Maybe&lt; typename F::result_type &gt;</a> <a class="code" href="structwibble_1_1Amorph.html#a2992cc74a4b94a3dee10eeff796033b0">ifType</a>( F func ) {
<a name="l00352"></a>00352         <span class="keyword">typedef</span> <span class="keyword">typename</span> F::argument_type T;
<a name="l00353"></a>00353         <span class="keyword">typedef</span> <a class="code" href="structwibble_1_1Maybe.html">Maybe&lt; typename F::result_type &gt;</a> rt;
<a name="l00354"></a>00354         T *ptr = impl&lt;T&gt;();
<a name="l00355"></a>00355         <span class="keywordflow">if</span> (ptr) {
<a name="l00356"></a>00356             <span class="keywordflow">return</span> rt::Just( func(*ptr) );
<a name="l00357"></a>00357         }
<a name="l00358"></a>00358         <span class="keywordflow">return</span> rt::Nothing();
<a name="l00359"></a>00359     }
<a name="l00360"></a>00360 
<a name="l00361"></a><a class="code" href="structwibble_1_1Amorph.html#ad0cecac2b67da54eab50fe71a226b78c">00361</a>     <span class="keyword">const</span> <a class="code" href="structwibble_1_1RangeInterface.html">Interface</a> *<a class="code" href="structwibble_1_1Amorph.html#ad0cecac2b67da54eab50fe71a226b78c">implementation</a>()<span class="keyword"> const </span>{
<a name="l00362"></a>00362         <span class="comment">// return dynamic_cast&lt; const Interface * &gt;( m_impl );</span>
<a name="l00363"></a>00363         <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span> <span class="keyword">const </span><a class="code" href="structwibble_1_1RangeInterface.html">Interface</a> * <span class="keyword">&gt;</span>( m_impl );
<a name="l00364"></a>00364     }
<a name="l00365"></a>00365 
<a name="l00366"></a><a class="code" href="structwibble_1_1Amorph.html#a1e91e90cb02dbe8458b6af5ca2caec27">00366</a>     <a class="code" href="structwibble_1_1RangeInterface.html">Interface</a> *<a class="code" href="structwibble_1_1Amorph.html#a1e91e90cb02dbe8458b6af5ca2caec27">implementation</a>() {
<a name="l00367"></a>00367         <span class="comment">// return dynamic_cast&lt; Interface * &gt;( m_impl );</span>
<a name="l00368"></a>00368         <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span> <a class="code" href="structwibble_1_1RangeInterface.html">Interface</a> * <span class="keyword">&gt;</span>( m_impl );
<a name="l00369"></a>00369     }
<a name="l00370"></a>00370 
<a name="l00371"></a><a class="code" href="structwibble_1_1Amorph.html#ae68430db3e0967615338630292f2ad2c">00371</a>     <a class="code" href="structwibble_1_1MorphInterface.html" title="An interface implemented by all morph classes.">MorphInterface&lt; Interface &gt;</a> *<a class="code" href="structwibble_1_1Amorph.html#ae68430db3e0967615338630292f2ad2c">morphInterface</a>()<span class="keyword"> const </span>{
<a name="l00372"></a>00372         <span class="keywordflow">return</span> m_impl;
<a name="l00373"></a>00373         <span class="comment">// return dynamic_cast&lt; MorphInterface&lt; * &gt;( m_impl );</span>
<a name="l00374"></a>00374     }
<a name="l00375"></a>00375 
<a name="l00376"></a><a class="code" href="structwibble_1_1Amorph.html#adf54e8075e61eea730bdb9ac4da1e415">00376</a>     <span class="keyword">const</span> <a class="code" href="structwibble_1_1RangeInterface.html">Interface</a> &amp;<a class="code" href="structwibble_1_1Amorph.html#adf54e8075e61eea730bdb9ac4da1e415">wrapped</a>()<span class="keyword"> const </span>{
<a name="l00377"></a>00377         <span class="keywordflow">return</span> *<a class="code" href="structwibble_1_1Amorph.html#ad0cecac2b67da54eab50fe71a226b78c">implementation</a>();
<a name="l00378"></a>00378     }
<a name="l00379"></a>00379 
<a name="l00380"></a><a class="code" href="structwibble_1_1Amorph.html#a051394eec2b907b21618a892abd72257">00380</a>     <a class="code" href="structwibble_1_1RangeInterface.html">Interface</a> &amp;<a class="code" href="structwibble_1_1Amorph.html#a051394eec2b907b21618a892abd72257">wrapped</a>() {
<a name="l00381"></a>00381         <span class="keywordflow">return</span> *<a class="code" href="structwibble_1_1Amorph.html#ad0cecac2b67da54eab50fe71a226b78c">implementation</a>();
<a name="l00382"></a>00382     }
<a name="l00383"></a>00383 
<a name="l00384"></a>00384     <span class="keyword">template</span>&lt; <span class="keyword">typename</span> T &gt;
<a name="l00385"></a><a class="code" href="structwibble_1_1Amorph.html#a81e988641a3c5815a7b2d0228588d6f9">00385</a>     <span class="keywordtype">bool</span> <a class="code" href="structwibble_1_1Amorph.html#a81e988641a3c5815a7b2d0228588d6f9">is</a>()<span class="keyword"> const </span>{
<a name="l00386"></a>00386         <span class="keywordflow">return</span> impl&lt; T &gt;();
<a name="l00387"></a>00387     }
<a name="l00388"></a>00388 
<a name="l00389"></a><a class="code" href="structwibble_1_1Amorph.html#a5f72e9dc604e3bb58dee74a34a89536d">00389</a>     <span class="keywordtype">bool</span> <a class="code" href="structwibble_1_1Amorph.html#a5f72e9dc604e3bb58dee74a34a89536d">isVoid</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> !m_impl; }
<a name="l00390"></a>00390 
<a name="l00391"></a>00391     <span class="keyword">template</span>&lt; <span class="keyword">typename</span> T &gt;
<a name="l00392"></a><a class="code" href="structwibble_1_1Amorph.html#ae278be8b913a623c24712443d27192f1">00392</a>     T *<a class="code" href="structwibble_1_1Amorph.html#ae278be8b913a623c24712443d27192f1">impl</a>()<span class="keyword"> const </span>{
<a name="l00393"></a>00393         T *p = <span class="keyword">dynamic_cast&lt;</span> T * <span class="keyword">&gt;</span>( m_impl );
<a name="l00394"></a>00394         <span class="keywordflow">if</span> ( !p ) {
<a name="l00395"></a>00395             <a class="code" href="structwibble_1_1MorphBase.html">MorphBase&lt; T, Interface &gt;</a> *m = <span class="keyword">dynamic_cast&lt;</span> <a class="code" href="structwibble_1_1MorphBase.html">MorphBase&lt; T, Interface &gt;</a> * <span class="keyword">&gt;</span>( m_impl );
<a name="l00396"></a>00396             <span class="keywordflow">if</span> ( m ) p = &amp;(m-&gt;<a class="code" href="structwibble_1_1MorphBase.html#aa189feb1e6ccc3be6b99c85a0b65169d">wrapped</a>());
<a name="l00397"></a>00397         }
<a name="l00398"></a>00398         <span class="keywordflow">if</span> ( !p ) {
<a name="l00399"></a>00399             p = <span class="keyword">dynamic_cast&lt;</span> T * <span class="keyword">&gt;</span>( <a class="code" href="structwibble_1_1Amorph.html#ae68430db3e0967615338630292f2ad2c">morphInterface</a>()-&gt;virtualBase() );
<a name="l00400"></a>00400         }
<a name="l00401"></a>00401         <span class="keywordflow">return</span> p;
<a name="l00402"></a>00402     }
<a name="l00403"></a>00403 
<a name="l00404"></a>00404 <span class="keyword">private</span>:
<a name="l00405"></a>00405     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> reservedSize() { <span class="keywordflow">return</span> <span class="keyword">sizeof</span>( m_padding ) + <span class="keyword">sizeof</span>( m_impl ); }
<a name="l00406"></a>00406     AmorphPadder&lt;Padding&gt; m_padding;
<a name="l00407"></a>00407     MorphInterface&lt; Interface &gt; *m_impl;
<a name="l00408"></a>00408     <span class="comment">// Interface *m_impl;</span>
<a name="l00409"></a>00409 };
<a name="l00410"></a>00410 
<a name="l00411"></a>00411 <span class="preprocessor">#ifndef SWIG_I</span>
<a name="l00412"></a>00412 <span class="preprocessor"></span><span class="keyword">template</span>&lt; <span class="keyword">typename</span> T, <span class="keyword">typename</span> X &gt;
<a name="l00413"></a><a class="code" href="namespacewibble.html#a57fc3989a0b350bef554147bfb69e122">00413</a> <span class="keyword">typename</span> X::template Convert&lt;T&gt;::type &amp;<a class="code" href="namespacewibble.html#a57fc3989a0b350bef554147bfb69e122">downcast</a>( <span class="keyword">const</span> X &amp;a )
<a name="l00414"></a>00414 {
<a name="l00415"></a>00415     <span class="keywordflow">return</span> *a.template impl&lt; T &gt;();
<a name="l00416"></a>00416 }
<a name="l00417"></a>00417 
<a name="l00418"></a>00418 <span class="preprocessor">#endif</span>
<a name="l00419"></a>00419 <span class="preprocessor"></span>
<a name="l00420"></a>00420 }
<a name="l00421"></a>00421 
<a name="l00422"></a>00422 <span class="preprocessor">#endif</span>
</pre></div></div><!-- contents -->


<hr class="footer"/><address class="footer"><small>
Generated on Wed May 2 2012 23:57:25 for wibble by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
